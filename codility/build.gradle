// START SNIPPET complete-example
apply plugin: "cpp"
apply plugin: "google-test"

model {
    repositories {
        libs(PrebuiltLibraries) {
            googleTest {
                headers.srcDir "../libs/googleTest/1.7.0/include"
                binaries.withType(StaticLibraryBinary) {
                    staticLibraryFile =
                        file("../libs/googleTest/1.7.0/lib/linux/libgtest.a")
                }
            }
        }
    }
    components {
      lesson1(NativeLibrarySpec) {}
      lesson2(NativeLibrarySpec) {}
    }
}
binaries.withType(GoogleTestTestSuiteBinarySpec) {
    lib library: "googleTest", linkage: "static"
    cppCompiler.args '-pthread'
    linker.args '-pthread'
}

tasks.withType(RunTestExecutable) {
    args "--gtest_output=xml:test_detail.xml"
}
